/*! For license information please see 20.ea475a9a.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[20],{1227:function(e,t,r){"use strict";var a=r(14),o=r.n(a),n=r(19),i=r(0),c=r.n(i),s=r(30),l=r(126),g=r.n(l),u=r(112),p=r.n(u),h=r(26);class d extends Error{}class m extends Error{}class f{static get(){var e=this;return Object(n.a)(o.a.mark((function t(){var r,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h.a.current,a=r.commandLine,n=r.userMapboxToken,f.token&&f.commandLine===a.toLowerCase()){t.next=10;break}if(""===n){t.next=6;break}f.token=n,t.next=9;break;case 6:return t.next=8,e.fetchToken("https://data.streamlit.io/tokens.json","mapbox");case 8:f.token=t.sent;case 9:f.commandLine=a.toLowerCase();case 10:return t.abrupt("return",f.token);case 11:case"end":return t.stop()}}),t)})))()}static fetchToken(e,t){return Object(n.a)(o.a.mark((function r(){var a,n;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.get(e);case 3:if(a=r.sent,null!=(n=a.data[t])&&""!==n){r.next=7;break}throw new Error('Missing token "'.concat(t,'"'));case 7:return r.abrupt("return",n);case 10:throw r.prev=10,r.t0=r.catch(0),new m("".concat(r.t0.message," (").concat(e,")"));case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}f.token=void 0,f.commandLine=void 0,f.isRunningLocal=()=>{const e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e};var y=r(201),b=r(106);var w=({error:e,width:t,deltaType:r})=>e instanceof d?c.a.createElement(b.a,{width:t,name:"No Mapbox token provided",message:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"To use ",c.a.createElement("code",null,"st.",r)," or ",c.a.createElement("code",null,"st.map")," you need to set up a Mapbox access token."),c.a.createElement("p",null,"To get a token, create an account at"," ",c.a.createElement("a",{href:"https://mapbox.com"},"https://mapbox.com"),". It's free for moderate usage levels!"),c.a.createElement("p",null,"Once you have a token, just set it using the Streamlit config option ",c.a.createElement("code",null,"mapbox.token")," and don't forget to restart your Streamlit server at this point if it's still running, then reload this tab."),c.a.createElement("p",null,"See"," ",c.a.createElement("a",{href:"https://docs.streamlit.io/cli.html#view-all-config-options"},"our documentation")," ","for more info on how to set config options."))}):e instanceof m?c.a.createElement(b.a,{width:t,name:"Error fetching Streamlit Mapbox token",message:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"This app requires an internet connection."),c.a.createElement("p",null,"Please check your connection and try again."),c.a.createElement("p",null,"If you think this is a bug, please file bug report"," ",c.a.createElement("a",{href:"https://github.com/streamlit/streamlit/issues/new/choose"},"here"),"."))}):c.a.createElement(b.a,{width:t,name:"Error fetching Streamlit Mapbox token",message:e.message});t.a=e=>t=>{class r extends i.PureComponent{constructor(r){var a;super(r),a=this,this.initMapboxToken=Object(n.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get();case 3:t=e.sent,a.setState({mapboxToken:t,isFetching:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setState({mapboxTokenError:e.t0,isFetching:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.render=()=>{const r=this.state,a=r.mapboxToken,o=r.mapboxTokenError,n=r.isFetching,i=this.props.width;return o?c.a.createElement(w,{width:i,error:o,deltaType:e}):n?c.a.createElement(y.a,{element:Object(s.g)("Loading...").get("alert"),width:i}):c.a.createElement(t,Object.assign({mapboxToken:a},this.props))},this.state={isFetching:!0,mapboxToken:void 0,mapboxTokenError:void 0},this.initMapboxToken()}}return r.displayName="withMapboxToken(".concat(t.displayName||t.name,")"),g()(r,t)}},1390:function(e,t){},1395:function(e,t){},1397:function(e,t){},1405:function(e,t){},1425:function(e,t){},1675:function(e,t,r){},2373:function(e,t,r){"use strict";r.r(t);var a=r(11),o=r(0),n=r.n(o),i=r(1385),c=r.n(i),s=r(1374),l=r(97),g=r(206),u=r(1227);r(1384),r(1675);class p extends o.PureComponent{constructor(...e){super(...e),this.state={initialized:!1}}componentDidMount(){this.setState({initialized:!0})}getViewport(){const e=this.props.element.get("spec");return(e?JSON.parse(e):{}).viewport||{}}generateViewState(e){const t=this.props,r=t.element,a=t.width,o=t.height,n=r.get("useContainerWidth");return{width:!e.width||n?a:e.width,height:e.height||o,longitude:e.longitude||0,latitude:e.latitude||0,pitch:e.pitch||0,bearing:e.bearing||0,zoom:e.zoom||1}}render(){const e=this.getViewport(),t=this.generateViewState(e),r=function(e="light-v9"){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("mapbox://"))return e;return"mapbox://styles/mapbox/".concat(e)}(e.mapStyle);return n.a.createElement("div",{className:"deckglchart stDeckGlChart",style:{height:t.height,width:t.width}},n.a.createElement(c.a,{initialViewState:t,height:t.height,width:t.width,controller:!0,layers:this.state.initialized?this.buildLayers():[]},n.a.createElement(s.StaticMap,{height:t.height,width:t.width,mapStyle:r,mapboxApiAccessToken:this.props.mapboxToken})))}buildLayers(){return this.props.element.get("layers").map(e=>function(e){const t=Object(l.d)(e.get("data")),r=JSON.parse(e.get("spec")),o=r.type?r.type.toLowerCase():"";switch(delete r.type,function(e,t){if(d.has(e)&&t.getLatitude&&t.getLongitude){const e=t.getLatitude,r=t.getLongitude;t.getPosition=t=>[t[r],t[e]]}if(m.has(e)&&t.getLatitude&&t.getLongitude&&t.getTargetLatitude&&t.getTargetLongitude){const e=t.getLatitude,r=t.getLongitude,a=t.getTargetLatitude,o=t.getTargetLongitude;t.getSourcePosition=t=>[t[r],t[e]],t.getTargetPosition=e=>[e[o],e[a]]}if(f.has(e)&&t.getColorR&&t.getColorG&&t.getColorB){const e=t.getColorR,r=t.getColorG,a=t.getColorB,o=t.getColorA;t.getColor=t=>[t[e],t[r],t[a],t[o]]}if(y.has(e)&&t.getColorR&&t.getColorG&&t.getColorB&&t.getTargetColorR&&t.getTargetColorG&&t.getTargetColorB){const e=t.getColorR,r=t.getColorG,a=t.getColorB,o=t.getColorA,n=t.getTargetColorR,i=t.getTargetColorG,c=t.getTargetColorB,s=t.getTargetColorA;t.getSourceColor=t=>[t[e],t[r],t[a],t[o]],t.getTargetColor=e=>[e[n],e[i],e[c],e[s]]}Object.keys(t).forEach(e=>{if(!e.startsWith("get"))return;const r=t[e];"function"===typeof r||(t[e]="string"===typeof r?e=>e[r]:()=>r)})}(o,r),o){case"arclayer":return new i.ArcLayer(Object(a.a)(Object(a.a)({data:t},h.ArcLayer),r));case"gridlayer":return new i.GridLayer(Object(a.a)(Object(a.a)({data:t},h.GridLayer),r));case"hexagonlayer":return new i.HexagonLayer(Object(a.a)(Object(a.a)({data:t},h.HexagonLayer),r));case"linelayer":return new i.LineLayer(Object(a.a)(Object(a.a)({data:t},h.LineLayer),r));case"pointcloudlayer":return new i.PointCloudLayer(Object(a.a)(Object(a.a)({data:t},h.PointCloudLayer),r));case"scatterplotlayer":return new i.ScatterplotLayer(Object(a.a)(Object(a.a)({data:t},h.ScatterplotLayer),r));case"screengridlayer":return new i.ScreenGridLayer(Object(a.a)(Object(a.a)({data:t},h.ScreenGridLayer),r));case"textlayer":return new i.TextLayer(Object(a.a)(Object(a.a)({data:t},h.TextLayer),r));default:throw new Error('Unsupported layer type "'.concat(o,'"'))}}(e)).toArray()}}p.defaultProps={height:500};const h={ArcLayer:{getSourceColor:function(e){return e.colorR&&e.colorG&&e.colorB?[e.colorR,e.colorG,e.colorB,null==e.colorA?255:e.colorA]:L},getTargetColor:function(e){return e.targetColorR&&e.targetColorG&&e.targetColorB?[e.targetColorR,e.targetColorG,e.targetColorB,null==e.targetColorA?255:e.targetColorA]:L},getSourcePosition:w,getTargetPosition:x},GridLayer:{getPosition:w},HexagonLayer:{getPosition:w},LineLayer:{getSourcePosition:w,getTargetPosition:x},PointCloudLayer:{getColor:C,getPosition:function(e){return[b(e.longitude,e.lon,e.positionX,e.x),b(e.latitude,e.lat,e.positionY,e.y),b(e.latitude,e.lat,e.positionZ,e.z)]},getNormal:function(e){return[e.normalX,e.normalY,e.normalZ]}},ScatterplotLayer:{getColor:C,getPosition:w,getRadius:e=>b(e.radius,100)},ScreenGridLayer:{getPosition:w,getWeight:e=>e.weight},TextLayer:{getColor:C,getPixelOffset:e=>[b(e.pixelOffsetX,0),b(e.pixelOffsetY,0)],getPosition:w,getAlignmentBaseline:"bottom"}};const d=new Set(["gridlayer","hexagonlayer","scatterplotlayer","screengridlayer","textlayer"]),m=new Set(["arclayer","linelayer"]),f=new Set(["pointcloudlayer","scatterplotlayer","textlayer"]),y=new Set(["arclayer"]);function b(...e){for(let t=0;t<e.length;t+=1)if(null!=e[t])return e[t];return null}function w(e){return[b(e.longitude,e.lon),b(e.latitude,e.lat)]}function x(e){return[b(e.longitude2,e.lon2),b(e.latitude2,e.lat2)]}const L=[200,30,0,160];function C(e){return e.colorR&&e.colorG&&e.colorB?[e.colorR,e.colorG,e.colorB,null==e.colorA?255:e.colorA]:L}var k=Object(u.a)("st.deck_gl_chart")(Object(g.a)(p));r.d(t,"default",(function(){return k}))}}]);
//# sourceMappingURL=20.ea475a9a.chunk.js.map