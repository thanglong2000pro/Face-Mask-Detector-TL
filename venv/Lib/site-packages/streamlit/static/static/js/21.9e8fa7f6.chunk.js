/*! For license information please see 21.9e8fa7f6.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[21],{1227:function(e,t,a){"use strict";var n=a(14),i=a.n(n),r=a(19),o=a(0),s=a.n(o),c=a(30),l=a(126),h=a.n(l),p=a(112),m=a.n(p),u=a(26);class w extends Error{}class d extends Error{}class g{static get(){var e=this;return Object(r.a)(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=u.a.current,n=a.commandLine,r=a.userMapboxToken,g.token&&g.commandLine===n.toLowerCase()){t.next=10;break}if(""===r){t.next=6;break}g.token=r,t.next=9;break;case 6:return t.next=8,e.fetchToken("https://data.streamlit.io/tokens.json","mapbox");case 8:g.token=t.sent;case 9:g.commandLine=n.toLowerCase();case 10:return t.abrupt("return",g.token);case 11:case"end":return t.stop()}}),t)})))()}static fetchToken(e,t){return Object(r.a)(i.a.mark((function a(){var n,r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.get(e);case 3:if(n=a.sent,null!=(r=n.data[t])&&""!==r){a.next=7;break}throw new Error('Missing token "'.concat(t,'"'));case 7:return a.abrupt("return",r);case 10:throw a.prev=10,a.t0=a.catch(0),new d("".concat(a.t0.message," (").concat(e,")"));case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()}}g.token=void 0,g.commandLine=void 0,g.isRunningLocal=()=>{const e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e};var b=a(201),S=a(106);var k=({error:e,width:t,deltaType:a})=>e instanceof w?s.a.createElement(S.a,{width:t,name:"No Mapbox token provided",message:s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"To use ",s.a.createElement("code",null,"st.",a)," or ",s.a.createElement("code",null,"st.map")," you need to set up a Mapbox access token."),s.a.createElement("p",null,"To get a token, create an account at"," ",s.a.createElement("a",{href:"https://mapbox.com"},"https://mapbox.com"),". It's free for moderate usage levels!"),s.a.createElement("p",null,"Once you have a token, just set it using the Streamlit config option ",s.a.createElement("code",null,"mapbox.token")," and don't forget to restart your Streamlit server at this point if it's still running, then reload this tab."),s.a.createElement("p",null,"See"," ",s.a.createElement("a",{href:"https://docs.streamlit.io/cli.html#view-all-config-options"},"our documentation")," ","for more info on how to set config options."))}):e instanceof d?s.a.createElement(S.a,{width:t,name:"Error fetching Streamlit Mapbox token",message:s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"This app requires an internet connection."),s.a.createElement("p",null,"Please check your connection and try again."),s.a.createElement("p",null,"If you think this is a bug, please file bug report"," ",s.a.createElement("a",{href:"https://github.com/streamlit/streamlit/issues/new/choose"},"here"),"."))}):s.a.createElement(S.a,{width:t,name:"Error fetching Streamlit Mapbox token",message:e.message});t.a=e=>t=>{class a extends o.PureComponent{constructor(a){var n;super(a),n=this,this.initMapboxToken=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get();case 3:t=e.sent,n.setState({mapboxToken:t,isFetching:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({mapboxTokenError:e.t0,isFetching:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.render=()=>{const a=this.state,n=a.mapboxToken,i=a.mapboxTokenError,r=a.isFetching,o=this.props.width;return i?s.a.createElement(k,{width:o,error:i,deltaType:e}):r?s.a.createElement(b.a,{element:Object(c.g)("Loading...").get("alert"),width:o}):s.a.createElement(t,Object.assign({mapboxToken:n},this.props))},this.state={isFetching:!0,mapboxToken:void 0,mapboxTokenError:void 0},this.initMapboxToken()}}return a.displayName="withMapboxToken(".concat(t.displayName||t.name,")"),h()(a,t)}},1390:function(e,t){},1395:function(e,t){},1397:function(e,t){},1405:function(e,t){},1425:function(e,t){},2046:function(e,t,a){},2369:function(e,t,a){"use strict";a.r(t);var n=a(11),i=a(0),r=a.n(i),o=a(1385),s=a.n(o),c=a(2023),l=a.n(c),h=a(1374),p=a(1044),m=a(2059),u=a(1498),w=a(1493),d=a(2047),g=a(1091),b=a(206),S=a(1227);a(1384),a(2046);const k={classes:Object(n.a)(Object(n.a)(Object(n.a)({},p),w),u)};Object(g.registerLoaders)([d.CSVLoader]);const f=new m.JSONConverter({configuration:k});class v extends i.PureComponent{constructor(...e){super(...e),this.state={viewState:{bearing:0,pitch:0,zoom:11},initialized:!1,initialViewState:{}},this.componentDidMount=()=>{this.setState({initialized:!0})},this.createTooltip=e=>{let t=this.props.element.get("tooltip");return!!(e&&e.object&&t)&&(t=JSON.parse(t),t.html?t.html=this.interpolate(e,t.html):t.text=this.interpolate(e,t.text),t)},this.interpolate=(e,t)=>{const a=t.match(/{(.*?)}/g);return a&&a.forEach(a=>{const n=a.substring(1,a.length-1);e.object.hasOwnProperty(n)&&(t=t.replace(a,e.object[n]))}),t},this.onViewStateChange=({viewState:e})=>{this.setState({viewState:e})}}static getDerivedStateFromProps(e,t){const a=v.getDeckObject(e);if(!l()(a.initialViewState,t.initialViewState)){const e=Object.keys(a.initialViewState).reduce((e,i)=>a.initialViewState[i]===t.initialViewState[i]?e:Object(n.a)(Object(n.a)({},e),{},{[i]:a.initialViewState[i]}),{});return{viewState:Object(n.a)(Object(n.a)({},t.viewState),e),initialViewState:a.initialViewState}}return null}render(){const e=v.getDeckObject(this.props),t=this.state.viewState;return r.a.createElement("div",{className:"stDeckGlJsonChart",style:{height:e.initialViewState.height,width:e.initialViewState.width}},r.a.createElement(s.a,{viewState:t,onViewStateChange:this.onViewStateChange,height:e.initialViewState.height,width:e.initialViewState.width,layers:this.state.initialized?e.layers:[],getTooltip:this.createTooltip,controller:!0},r.a.createElement(h.StaticMap,{height:e.initialViewState.height,width:e.initialViewState.width,mapStyle:e.mapStyle&&("string"===typeof e.mapStyle?e.mapStyle:e.mapStyle[0]),mapboxApiAccessToken:this.props.mapboxToken})))}}v.getDeckObject=e=>{const t=e.element,a=e.width,n=e.height,i=t.get("useContainerWidth"),r=JSON.parse(t.get("json"));return n?(r.initialViewState.height=n,r.initialViewState.width=a):(r.initialViewState.height||(r.initialViewState.height=500),i&&(r.initialViewState.width=a)),delete r.views,f.convert(r)};var x=Object(S.a)("st.pydeck_chart")(Object(b.a)(v));a.d(t,"default",(function(){return x}))}}]);
//# sourceMappingURL=21.9e8fa7f6.chunk.js.map