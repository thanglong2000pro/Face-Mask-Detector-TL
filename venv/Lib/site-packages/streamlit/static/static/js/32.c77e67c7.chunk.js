/*! For license information please see 32.c77e67c7.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[32],{2339:function(e,t,s){},2387:function(e,t,s){"use strict";s.r(t);var a=s(11),r=s(204),n=s(112),l=s.n(n),o=s(2364),i=s(55),c=s(148),d=s(0),p=s.n(d),h=s(5);s(2339);class u extends p.a.PureComponent{constructor(e){super(e),this.currentUploadCanceller=void 0,this.componentDidUpdate=e=>{e.disabled!==this.props.disabled&&this.props.disabled&&this.reset()},this.dropHandler=(e,t,s)=>{const a=this.props.element.get("maxUploadSizeMb");if(t.length>0){const e="".concat(t[0].type," files are not allowed");return void this.setState({status:"ERROR",errorMessage:e})}const n=1024*a*1024;var o,i=Object(r.a)(e);try{for(i.s();!(o=i.n()).done;){if(o.value.size>n){const e="The max file size allowed is ".concat(a,"MB");return void this.setState({status:"ERROR",errorMessage:e})}}}catch(c){i.e(c)}finally{i.f()}this.setState({acceptedFiles:e,status:"UPLOADING"}),this.currentUploadCanceller=l.a.CancelToken.source(),this.props.uploadClient.uploadFiles(this.props.element.get("id"),e,void 0,this.currentUploadCanceller.token).then(()=>{this.currentUploadCanceller=void 0,this.setState({status:"UPLOADED"})}).catch(e=>{l.a.isCancel(e)?(this.currentUploadCanceller=void 0,this.setState({status:"UPLOADED"})):this.setState({status:"ERROR",errorMessage:e?e.toString():"Unknown error"})})},this.reset=()=>{this.setState({status:"READY",errorMessage:void 0,acceptedFiles:[]})},this.renderErrorMessage=()=>{const e=this.state.errorMessage;return p.a.createElement("div",{className:"uploadStatus uploadError"},p.a.createElement("span",{className:"body"},p.a.createElement(i.a,{className:"icon",type:"warning"})," ",e),p.a.createElement(h.Button,{color:"link",onClick:this.reset},"OK"))},this.renderUploadingMessage=()=>p.a.createElement("div",{className:"uploadStatus uploadProgress"},p.a.createElement("span",{className:"body"},p.a.createElement(h.Spinner,{color:"secondary",size:"sm"})," Uploading..."),p.a.createElement(h.Button,{color:"link",onClick:this.cancelCurrentUpload},"Cancel")),this.cancelCurrentUpload=()=>{null!=this.currentUploadCanceller&&(this.currentUploadCanceller.cancel(),this.currentUploadCanceller=void 0)},this.renderFileUploader=()=>{const e=this.state,t=e.status,s=e.errorMessage,r=this.props.element,n=r.get("type").toArray().map(e=>".".concat(e)),l=r.get("multipleFiles");let i=c.d,d="";return"UPLOADED"===t&&(i=Object(a.a)({},i),i.ContentMessage=Object(a.a)({},i.ContentMessage),i.ContentMessage.style=Object(a.a)({},i.ContentMessage.style),i.ContentMessage.style.visibility="hidden",i.ContentMessage.style.overflow="hidden",i.ContentMessage.style.height="0.625rem",i.ContentSeparator=Object(a.a)({},i.ContentSeparator),i.ContentSeparator.style.visibility="hidden",d=l?this.state.acceptedFiles.map(e=>e.name).join(", "):this.state.acceptedFiles[0].name),p.a.createElement(p.a.Fragment,null,"UPLOADED"===t&&p.a.createElement("div",{className:"uploadOverlay uploadDone"},p.a.createElement("span",{className:"body"},d)),p.a.createElement(o.a,{onDrop:this.dropHandler,errorMessage:s,accept:0===n.length?void 0:n,disabled:this.props.disabled,overrides:i,multiple:l}))},this.render=()=>{const e=this.state.status,t=this.props.element.get("label");let s;return s="ERROR"===e?this.renderErrorMessage:"UPLOADING"===e?this.renderUploadingMessage:this.renderFileUploader,p.a.createElement("div",{className:"Widget stFileUploader"},p.a.createElement("label",null,t),s())},this.state={status:"READY",errorMessage:void 0,acceptedFiles:[]}}}var m=u;s.d(t,"default",(function(){return m}))}}]);
//# sourceMappingURL=32.c77e67c7.chunk.js.map